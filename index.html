<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kiosco La Mechi</title>

<style>
* { box-sizing: border-box; }

body {
  font-family: 'Segoe UI', Arial, sans-serif;
  margin: 0;
  background: #e3f2fd;
  color: #0d47a1;
}

header {
  background: linear-gradient(135deg, #1976d2, #0d47a1);
  color: white;
  padding: 2rem;
  text-align: center;
}

.container {
  max-width: 1100px;
  margin: auto;
  padding: 1rem;
}

.products {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 1rem;
}

.product {
  background: white;
  border-radius: 12px;
  padding: 1rem;
  text-align: center;
  box-shadow: 0 6px 12px rgba(0,0,0,.1);
}

.product img {
  width: 100%;
  height: 140px;
  object-fit: contain;
  background: #e3f2fd;
  border-radius: 10px;
}

.price {
  font-weight: bold;
  margin: .5rem 0;
}

.controls {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 10px;
}

.counter {
  min-width: 28px;
  font-weight: bold;
}

button {
  background: #1976d2;
  color: white;
  border: none;
  padding: .4rem .7rem;
  border-radius: 6px;
  cursor: pointer;
}

button:hover { background: #0d47a1; }

.remove { background: #d32f2f; }

h2 {
  grid-column: 1 / -1;
  border-bottom: 2px solid #bbdefb;
}

/* Animaciones */
@keyframes pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.1); }
  100% { transform: scale(1); }
}
.product.added { animation: pop 0.25s ease; }

@keyframes vibrate {
  0% { transform: translateX(0); }
  25% { transform: translateX(-3px); }
  50% { transform: translateX(3px); }
  75% { transform: translateX(-3px); }
  100% { transform: translateX(0); }
}
.total-float.vibrate { animation: vibrate 0.3s; }

/* Total flotante */
.total-float {
  position: fixed;
  bottom: 90px;
  right: 20px;
  background: white;
  color: #0d47a1;
  padding: 12px 16px;
  border-radius: 14px;
  box-shadow: 0 6px 15px rgba(0,0,0,.25);
  font-weight: bold;
  z-index: 998;
}

/* WhatsApp flotante */
.wpp-float {
  position: fixed;
  bottom: 20px;
  right: 20px;
  background: #25d366;
  color: white;
  padding: 14px 18px;
  border-radius: 50px;
  font-size: 16px;
  box-shadow: 0 6px 15px rgba(0,0,0,.3);
  cursor:pointer;
}

/* M√©todos de pago */
#paymentMethod { margin-top:1rem; display:flex; gap:10px; flex-wrap:wrap; }
.payOption {
  cursor: pointer;
  background: #bbdefb;
  padding: 10px 16px;
  border-radius: 12px;
  font-size: 18px;
  display: flex;
  align-items: center;
  gap: 8px;
  border: 2px solid transparent;
  transition: all 0.2s;
}
.payOption:hover { background: #90caf9; }
.payOption.selected { border-color: #0d47a1; background: #1976d2; color: white; }
#aliasBox { display:none; margin-top:0.5rem; background:#fff; padding:0.5rem; border-radius:6px; }

</style>
</head>

<body>

<header>
  <h1>Kiosco La Mechi</h1>
  <p>Pedidos por WhatsApp ¬∑ Seleccion√° m√©todo de pago</p>
</header>

<div class="container">
  <div class="products" id="productList"></div>
</div>

<div class="container">
  <h2>üõí Tu pedido</h2>
  <ul id="cart"></ul>
  <p><strong>Total: $<span id="total">0.00</span></strong></p>

<h3>üí≥ M√©todo de pago</h3>
<div id="paymentMethod" style="display:flex; flex-direction:column; gap:10px;">
  <div class="payOption selected" data-value="efectivo">üíµ Efectivo</div>
  <div class="payOption" data-value="transferencia">üè¶ Transferencia</div>
</div>

<div id="aliasBox" style="display:none; margin-left:20px; margin-top:5px;">
  <strong>Alias:</strong> barrientos0820<br>
  <strong>Titular:</strong> Gabriel Agustin Barrientos
</div>


  <div id="aliasBox">
    <strong>Alias:</strong> barrientos0820<br>
    <strong>Titular:</strong> Gabriel Agustin Barrientos
  </div>
</div>

<div class="total-float" id="totalBox">
  üßæ Total: $<span id="totalFloat">0.00</span>
</div>

<a class="wpp-float" onclick="sendWhatsApp()">üì≤ Enviar pedido</a>

<audio id="addSound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3">
</audio>

<script>
function vibratePhone(pattern=[60]){ if(navigator.vibrate){navigator.vibrate(pattern);} }

const products = [
  { category:'Bebidas', name:'Coca-Cola 2.5L', price:3700, img:'bebidas/coca.jfif' },
  { category:'Bebidas', name:'Manaos 3L', price:2000, img:'bebidas/manaos.jfif' },
  { category:'Mercader√≠a', name:'Yerba 500g', price:1800, img:'mercaderias/bdia.png' },
  { category:'Golosinas', name:'Chocolate', price:1500, img:'mercaderias/bdia.png' }
];

let cart = [];
let selectedPayment = 'efectivo';

function getQty(name){ const item=cart.find(p=>p.name===name); return item? item.qty:0; }

function renderProducts(){
  const list = document.getElementById('productList'); list.innerHTML='';
  const cats = [...new Set(products.map(p=>p.category))];

  cats.forEach(c=>{
    list.innerHTML+=`<h2>${c}</h2>`;
    products.filter(p=>p.category===c).forEach(p=>{
      list.innerHTML+=`
      <div class="product">
        <img src="${p.img}">
        <h3>${p.name}</h3>
        <div class="price">$${p.price}</div>
        <div class="controls">
          <button onclick="addToCart('${p.name}',${p.price},event)">+</button>
          <span class="counter">${getQty(p.name)}</span>
          <button class="remove" onclick="removeOne('${p.name}')">‚àí</button>
        </div>
      </div>`;
    });
  });
}

function addToCart(name,price,e){
  const item=cart.find(p=>p.name===name); item? item.qty++: cart.push({name,price,qty:1});
  document.getElementById('addSound').play();
  vibratePhone([40]);
  e.target.closest('.product').classList.add('added');
  setTimeout(()=>e.target.closest('.product').classList.remove('added'),300);
  renderProducts(); renderCart();
}

function removeOne(name){
  const item=cart.find(p=>p.name===name); if(!item) return;
  item.qty--; vibratePhone([20,30,20]);
  if(item.qty===0) cart=cart.filter(p=>p.name!==name);
  renderProducts(); renderCart();
}

function renderCart(){
  const ul=document.getElementById('cart');
  const totalSpan=document.getElementById('total');
  const totalFloat=document.getElementById('totalFloat');
  const totalBox=document.getElementById('totalBox');
  ul.innerHTML=''; let total=0;
  cart.forEach(p=>{
    ul.innerHTML+=`<li>${p.qty} √ó ${p.name} ‚Äî $${(p.price*p.qty).toFixed(2)}</li>`;
    total+=p.price*p.qty;
  });
  totalSpan.textContent=total.toFixed(2);
  totalFloat.textContent=total.toFixed(2);
  totalBox.classList.add('vibrate'); setTimeout(()=>totalBox.classList.remove('vibrate'),300);
}

// Manejo selecci√≥n m√©todo de pago
document.querySelectorAll('.payOption').forEach(el=>{
  el.addEventListener('click', ()=>{
    document.querySelectorAll('.payOption').forEach(e=>e.classList.remove('selected'));
    el.classList.add('selected');
    selectedPayment = el.dataset.value;
    document.getElementById('aliasBox').style.display = selectedPayment==='transferencia'? 'block':'none';
  });
});

function sendWhatsApp(){
  if(cart.length===0) return alert('Carrito vac√≠o');
  let msg='Hola! Quiero pedir:%0A'; let total=0;
  cart.forEach(p=>{
    msg+=`- ${p.qty} x ${p.name} ($${(p.price*p.qty).toFixed(2)})%0A`;
    total+=p.price*p.qty;
  });
  msg+=`%0ATotal: $${total.toFixed(2)}`;
  if(selectedPayment==='transferencia') msg+=`%0APago por transferencia%0AAlias: barrientos0820`;
  else msg+=`%0APago en efectivo`;
  window.open('https://wa.me/5493873656775?text='+msg,'_blank');
}

renderProducts();
</script>

</body>
</html>

